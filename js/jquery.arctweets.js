(function(e){e.fn.tweet=function(t){function r(e){if(e.match(/20[\d]+jp/)){e=e.replace(/^(\w+) (\w+) (\d+) ([0-9:]+) ([0-9\+]+) (\d+)jp/,"jp1 jp2 jp3 jp6 jp4 jp5")}var t=Date.parse(e);var n=arguments.length>1?arguments[1]:new Date;var r=parseInt((n.getTime()-t)/1e3,10);if(r<60){return"less than a minute ago"}else if(r<120){return"about a minute ago"}else if(r<45*60){return parseInt(r/60,10).toString()+" minutes ago"}else if(r<90*60){return"about an hour ago"}else if(r<24*60*60){return"about "+parseInt(r/3600,10).toString()+" hours ago"}else if(r<48*60*60){return"1 day ago"}else{return parseInt(r/86400,10).toString()+" days ago"}}var n={username:["arc90"],count:10,loading_text:null,proxy_url:"/tweetscache.php?tweetUri="};e.fn.extend({linkUrl:function(){var t=[];var n=/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi;this.each(function(){t.push(this.replace(n,'<a href="jp1">jp1</a>'))});return e(t)},linkUser:function(){var t=[];var n=/[\@]+([A-Za-z0-9-_]+)/gi;this.each(function(){t.push(this.replace(n,'<a href="http://twitter.com/jp1">@jp1</a>'))});return e(t)},linkHash:function(){var t=[];var r=/ [\#]+([A-Za-z0-9-_]+)/gi;this.each(function(){t.push(this.replace(r,' <a href="http://search.twitter.com/search?q=&tag=jp1&lang=all&from='+n.username.join("%2BOR%2B")+'">#jp1</a>'))});return e(t)}});if(t){e.extend(n,t)}return this.each(function(){var t=e(this);var i=e('<li class="loading"><p>'+n.loading_text+"</p></li>");if(typeof n.username==="string"){n.username=[n.username]}var o="http://api.twitter.com/1/statuses/user_timeline.json?screen_name="+n.username+"&count="+n.count;if(typeof n.proxy_url!=="undefined"){o=n.proxy_url+encodeURIComponent(o)}if(n.loading_text){e(this).append(i)}e.ajax({type:"GET",url:o,dataType:"jsonp",cache:false,error:function(e,n,r){t.html('<li class="error"><p>Sorry, but we&#39;re unable to retrieve tweets from Arc90 at this time.</p></li>')},success:function(o,u){if(n.loading_text){i.remove()}var a=0,f=o.length;for(a;a<f;a++){var l=o[a];var c='<a href="http://twitter.com/'+l.user.screen_name+"/statuses/"+l.id+'" title="View tweet on twitter">'+r(l.created_at)+"</a>";var h='<span class="tweet_text">'+e([l.text]).linkUrl().linkUser().linkHash()[0]+"</span>";t.append("<li><p>"+h+'</p><p class="from">'+c+"</p></li>")}t.cycle({fx:"scrollLeft",timeout:8e3,speed:750,pause:1})}})})}})(jQuery)